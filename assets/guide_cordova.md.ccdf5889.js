import{_ as s,c as a,o as n,V as l}from"./chunks/framework.7db3ccb7.js";const e="/mobile/guide/10.png",o="/mobile/guide/11.png",p="/mobile/guide/12.png",r="/mobile/guide/13.png",t="/mobile/guide/14.png",A=JSON.parse('{"title":"Cordova","description":"","frontmatter":{},"headers":[],"relativePath":"guide/cordova.md","filePath":"guide/cordova.md","lastUpdated":1682096942000}'),c={name:"guide/cordova.md"},i=l('<h1 id="cordova" tabindex="-1">Cordova <a class="header-anchor" href="#cordova" aria-label="Permalink to &quot;Cordova&quot;">​</a></h1><p>Cordova 是⽤ Web 技术（ HTML，CSS 和 JS ）构建移动应⽤的平台。我们可以认为Cordova 是⼀个容器，⽤于将的 Web 应⽤移植到移动端，同时⽀持移动端的功能（例如：定位、蓝⽛、摄像头等）。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>默认情况下，Web 应⽤不能使⽤移动端功能（例如：定位，蓝⽛，摄像头等）。通过 Cordova，我们 可以使⽤ Web 技术，实现应⽤，同时，⽀持移动端功能</p></div><h3 id="优势" tabindex="-1">优势 <a class="header-anchor" href="#优势" aria-label="Permalink to &quot;优势&quot;">​</a></h3><ul><li>对前端友好，学习成本低。HTML，CSS 和 JS，只要你写过 SPA，就很熟悉 Cordova</li><li>跨平台，⼀套代码，多端部署（便于移植）。IOS，Android，Windows Phone，Amazon-fireos，⿊莓，Firefox OS，Ubuntu 和 tizien</li></ul><h3 id="不足" tabindex="-1">不足 <a class="header-anchor" href="#不足" aria-label="Permalink to &quot;不足&quot;">​</a></h3><ul><li>Cordova 应⽤⽐原⽣应⽤慢（不适合做⾼性能应⽤）</li><li>Cordova 跨浏览器的兼容性差</li><li>Cordova 跨平台的兼容性有待提⾼（某些平台上的 API 还不⽀持）</li></ul><h3 id="资源网站" tabindex="-1">资源网站 <a class="header-anchor" href="#资源网站" aria-label="Permalink to &quot;资源网站&quot;">​</a></h3><ul><li>官⽹： <a href="https://cordova.apache.org/" target="_blank" rel="noreferrer">https://cordova.apache.org/</a></li><li>中⽂镜像：<a href="http://cordova.axuer.com/" target="_blank" rel="noreferrer">http://cordova.axuer.com/</a></li><li>Github： <a href="https://github.com/apache/cordova" target="_blank" rel="noreferrer">https://github.com/apache/cordova</a></li></ul><h3 id="架构图" tabindex="-1">架构图 <a class="header-anchor" href="#架构图" aria-label="Permalink to &quot;架构图&quot;">​</a></h3><p><img src="'+e+`" alt=""></p><h2 id="环境搭建" tabindex="-1">环境搭建 <a class="header-anchor" href="#环境搭建" aria-label="Permalink to &quot;环境搭建&quot;">​</a></h2><p>整体来说，Cordova 需要的环境是 Node.js + 平台（例如：Android 和 iOS）。环境搭建主要包含如下内容：</p><ul><li>Node.js 环境搭建</li><li>Git 安装</li><li>Android 环境搭建</li><li>iOS 环境搭建</li><li>VS Code 编辑器</li></ul><h3 id="node-js-环境搭建" tabindex="-1">Node.js 环境搭建 <a class="header-anchor" href="#node-js-环境搭建" aria-label="Permalink to &quot;Node.js 环境搭建&quot;">​</a></h3><ul><li>Node.js 的版本应⼤于等于 12，推荐安装 LTS 版本（去 Node.js 官⽹下载安装包）</li><li>安装之后，（为了提⾼下载速度）我们将 npm 镜像源，设置为淘宝的</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 修改 npm 的镜像源</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npm.taobao.org</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 验证是否更改成功（查看镜像源）：</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="git-安装" tabindex="-1">Git 安装 <a class="header-anchor" href="#git-安装" aria-label="Permalink to &quot;Git 安装&quot;">​</a></h3><p>Cordova 依赖 Git 命令⾏⼯具</p><h3 id="android-环境搭建" tabindex="-1">Android 环境搭建 <a class="header-anchor" href="#android-环境搭建" aria-label="Permalink to &quot;Android 环境搭建&quot;">​</a></h3><h4 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h4><p>JDK（Java Development Kit）是 Java 开发套件的简称。Android 开发，需要安装 JDK。</p><h4 id="下载" tabindex="-1">下载 <a class="header-anchor" href="#下载" aria-label="Permalink to &quot;下载&quot;">​</a></h4><p>下载地址：<a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noreferrer">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p><p>请选择⼀个适合本地操作系统的安装包（操作系统+位数，例如：Windows x64）。</p><p>下载时，提示需要登陆，我们可以先注册 Oracle 账户，登陆后再下载。</p><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h4><p>下载完成后，双击安装包，开始安装（⼀直下⼀步就好，⽆需特殊配置），设置 Java 环境变量 <code>JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_271</code><img src="`+o+'" alt=""></p><p>配置好 JAVA_HOME 后，可以再配置两个路径 <img src="'+p+`" alt=""></p><h4 id="检测安装结果" tabindex="-1">检测安装结果 <a class="header-anchor" href="#检测安装结果" aria-label="Permalink to &quot;检测安装结果&quot;">​</a></h4><p>如果以下命令可以正常运⾏，则说明环境变量配置成功</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">java</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">javac</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="android-studio" tabindex="-1">Android Studio <a class="header-anchor" href="#android-studio" aria-label="Permalink to &quot;Android Studio&quot;">​</a></h3><p>Android Studio （简称 AS）是安卓开发的编辑器和运⾏环境。使⽤之前，先下载。（如已经安装，请略过本节）</p><p>下载地址：<a href="https://developer.android.com/studio/index.html" target="_blank" rel="noreferrer">https://developer.android.com/studio/index.html</a></p><blockquote><p>下载过程需要翻墙，下载安装内容很多，所以安装过程会很缓慢</p></blockquote><p>安装 Android SDK（可选）</p><p>正常来说，你可以忽略这⼀步。因为 Android Studio 默认会安装最新版本的 Android SDK 。</p><blockquote><p>Android SDK 是针对安卓开发的套件。 如果最新的 Android SDK 存在兼容性问题。这⾥你还可以单独安装，指定版本的 Android SDK。</p></blockquote><p>打开 Android Studio，在菜单 Tools 下找到 &quot;SDK Manager&quot;</p><p>在 SDK Manager 中选择&quot;SDK Platforms&quot;选项卡，然后，在右下⻆勾选&quot;Show Package Details&quot;。展开指定版本（例如： Android 10 (Q) ）的选项，确保勾选了下⾯这些组件（重申：你必须使⽤稳定的翻墙⼯具，否则可能都看不到这个界⾯）：</p><ul><li>Android SDK Platform 29</li><li>Intel x86 Atom_64 System Image （官⽅模拟器镜像⽂件，使⽤⾮官⽅模拟器不需要安装此组件）</li></ul><p>然后点击&quot;SDK Tools&quot;选项卡，同样勾中右下⻆的&quot;Show Package Details&quot;。展开&quot;Android SDK Build-Tools&quot;选项，确保选中了 29.0.2 版本。</p><blockquote><p>总共有两个内容，组件⼤⼩约：113.0 MB，安装后占⽤空间约：451.9 MB</p></blockquote><p>点击 OK 执⾏下载（这个下载时间也⽐较⻓，同时确保翻墙⼯具稳定可⽤）</p><blockquote><p>如果下载过程中断，请重复选中以上两个组件，再次下载 例如，我本地下载中断，报错：SSL peer shut down incorrectly（⽹络中断报错） 只需要重复选中所需组件，再次下载即可。</p></blockquote><p>下载完成后，点击 Finish</p><h4 id="设置-android-环境变量" tabindex="-1">设置 Android 环境变量 <a class="header-anchor" href="#设置-android-环境变量" aria-label="Permalink to &quot;设置 Android 环境变量&quot;">​</a></h4><ul><li>ANDROID_HOME=C:\\Users\\你的名字\\AppData\\Local\\Android\\Sdk</li><li>ANDROID_SDK_ROOT=C:\\Users\\你的名字\\AppData\\Local\\Android\\Sdk</li></ul><p><img src="`+r+'" alt=""></p><h3 id="gradle-安装" tabindex="-1">Gradle 安装 <a class="header-anchor" href="#gradle-安装" aria-label="Permalink to &quot;Gradle 安装&quot;">​</a></h3><ol><li>下载</li></ol><p>下载地址：<a href="https://services.gradle.org/distributions/" target="_blank" rel="noreferrer">https://services.gradle.org/distributions/</a></p><p>下载版本：建议使⽤ gradle-6.5-all.zip （我之前下载的 6.8 说太⾼了，⽽后⼜切换到 6.5）</p><ol start="2"><li>解压</li></ol><p>下载后解压，将加压包放到任意位置（例如，我本地是 D:\\Program Files\\gradle-6.5）</p><ol start="3"><li>绑定环境变量</li></ol><p>D:\\Program Files\\gradle-6.5\\bin</p><p><img src="'+t+`" alt=""></p><p>检测安装结果</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">gradle</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="ios环境搭建" tabindex="-1">iOS环境搭建 <a class="header-anchor" href="#ios环境搭建" aria-label="Permalink to &quot;iOS环境搭建&quot;">​</a></h3><h4 id="安装-xcode" tabindex="-1">安装 Xcode <a class="header-anchor" href="#安装-xcode" aria-label="Permalink to &quot;安装 Xcode&quot;">​</a></h4><p>在 App Store 中安装即可。安装完成后，再安装 iOS 模拟器。</p><h4 id="安装部署工具" tabindex="-1">安装部署⼯具 <a class="header-anchor" href="#安装部署工具" aria-label="Permalink to &quot;安装部署⼯具&quot;">​</a></h4><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ios-sim</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ios-deploy</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="初始化项目" tabindex="-1">初始化项⽬ <a class="header-anchor" href="#初始化项目" aria-label="Permalink to &quot;初始化项⽬&quot;">​</a></h2><h3 id="安装-cordova-cli" tabindex="-1">安装 Cordova CLI <a class="header-anchor" href="#安装-cordova-cli" aria-label="Permalink to &quot;安装 Cordova CLI&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cordova</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="创建项目" tabindex="-1">创建项目 <a class="header-anchor" href="#创建项目" aria-label="Permalink to &quot;创建项目&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HelloCordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">io.cordova.hellocordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CordovaApp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># HelloCordova 应⽤程序的⽬录名称。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># io.cordova.hellocordova 项⽬唯⼀标识（默认的反向域值）。⼀般是点连接的语法</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># CordovaApp 应⽤的标题。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="添加平台" tabindex="-1">添加平台 <a class="header-anchor" href="#添加平台" aria-label="Permalink to &quot;添加平台&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HelloCordova</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 浏览器</span></span>
<span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">browser</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安卓 添加 android 平台，并确保他们保存在了 config.xml 中</span></span>
<span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">android</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--save</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看当前平台</span></span>
<span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ls</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>当前平台信息（注意平台版本，例如，Android 是 9.0，将来安装模拟器时，也要安装对应的版本）</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Installed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">platforms:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">android</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9.0</span><span style="color:#C3E88D;">.0</span></span>
<span class="line"><span style="color:#FFCB6B;">browser</span></span>
<span class="line"><span style="color:#FFCB6B;">Available</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">platforms:</span></span>
<span class="line"><span style="color:#FFCB6B;">browser</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^6.0.0</span></span>
<span class="line"><span style="color:#FFCB6B;">electron</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^1.0.0</span></span>
<span class="line"><span style="color:#FFCB6B;">windows</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^7.0.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="运行" tabindex="-1">运行 <a class="header-anchor" href="#运行" aria-label="Permalink to &quot;运行&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 浏览器端运⾏</span></span>
<span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">browser</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安卓端运⾏</span></span>
<span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">android</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 真机调试</span></span>
<span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">emulate</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">android</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 模拟器启动</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="项目目录" tabindex="-1">项目目录 <a class="header-anchor" href="#项目目录" aria-label="Permalink to &quot;项目目录&quot;">​</a></h3><ul><li>hooks：钩⼦⽬录。每个Cordova 命令都可以定义 before 和 after 的 Hook，⽐如：before_build、after_build</li><li>platforms：平台⽬录。例如 android、ios、browser 等</li><li>plugins：插件⽬录。安装的插件会放在这⾥</li><li>www：源代码⽬录。在执⾏ cordova prepare 的时候，源码会被 copy 到各个平台⼯程的 assets\\www⽬录下</li><li>config.xml：主配置⽂件，⽐如：项⽬使⽤了哪些插件、应⽤图标和启动⻚⾯</li></ul><h3 id="cordova-js" tabindex="-1">cordova.js <a class="header-anchor" href="#cordova-js" aria-label="Permalink to &quot;cordova.js&quot;">​</a></h3><p>在 <code>[项⽬⽬录]/www/index.html</code> 中引⼊的 cordova.js 不是当前⽬录下的。⽽是构建之后⽬录下的</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cordova.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这⾥以 browser 平台为例来解释（如果没有添加 browser 平台，请先添加）运⾏ browser</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">browser</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>实际上，平台下 cordova.js 来⾃于 <code>[项⽬⽬录]/platform/[平台名称]/platform_www/cordova.js</code> 不同 平台下的 cordova.js 内容不同</p><h2 id="事件" tabindex="-1">事件 <a class="header-anchor" href="#事件" aria-label="Permalink to &quot;事件&quot;">​</a></h2><p>Cordova 给我们提供了很多的事件。应⽤程序代码中可以添加这些事件的监听。</p><h3 id="设备就绪" tabindex="-1">设备就绪 <a class="header-anchor" href="#设备就绪" aria-label="Permalink to &quot;设备就绪&quot;">​</a></h3><p>它是 Cordova 设备 API 准备好，并可以访问的信号。相当于 Web ⻚⾯中的 onload 事件。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">deviceready</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> onDeviceReady</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onDeviceReady</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 设备就绪后的其他逻辑代码</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其他后续事件，⼀般都写在 onDeviceReady 函数中</p><h3 id="应用挂起" tabindex="-1">应用挂起 <a class="header-anchor" href="#应用挂起" aria-label="Permalink to &quot;应用挂起&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onDeviceReady</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 当前应⽤切换到后台时，触发 pause 事件</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pause</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">设备挂起</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="应用回来" tabindex="-1">应用回来 <a class="header-anchor" href="#应用回来" aria-label="Permalink to &quot;应用回来&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onDeviceReady</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 当前应⽤由后台切换到前台时，触发 resume 事件</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">resume</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">设备重新回来</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="回退按钮" tabindex="-1">回退按钮 <a class="header-anchor" href="#回退按钮" aria-label="Permalink to &quot;回退按钮&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onDeviceReady</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 点击回退按钮时，触发 backbutton 事件</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">backbutton</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">回退按钮</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="菜单按钮" tabindex="-1">菜单按钮 <a class="header-anchor" href="#菜单按钮" aria-label="Permalink to &quot;菜单按钮&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onDeviceReady</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 按下菜单按钮时，触发 menubutton 事件</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">menubutton</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">按下菜单按钮</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>更多详情：<a href="https://cordova.apache.org/docs/en/10.x/cordova/events/events.html" target="_blank" rel="noreferrer">https://cordova.apache.org/docs/en/10.x/cordova/events/events.html</a></p></blockquote><h2 id="config-xml" tabindex="-1">config.xml <a class="header-anchor" href="#config-xml" aria-label="Permalink to &quot;config.xml&quot;">​</a></h2><h3 id="简介-1" tabindex="-1">简介 <a class="header-anchor" href="#简介-1" aria-label="Permalink to &quot;简介&quot;">​</a></h3><p>config.xml 是 Cordova 应⽤程序的全局配置⽂件。进⾏项⽬构建后，该⽂件会被复制到平台的⼦⽬录下。例如</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">app/platforms/android/res/xml/config.xml</span></span>
<span class="line"><span style="color:#FFCB6B;">app/platforms/ios/AppName/config.xml</span></span>
<span class="line"><span style="color:#FFCB6B;">app/platforms/browser/config.xml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="基本结构" tabindex="-1">基本结构 <a class="header-anchor" href="#基本结构" aria-label="Permalink to &quot;基本结构&quot;">​</a></h3><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">widget</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">引⽤名称</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">description</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">应⽤描述</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">description</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">author</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">作者</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">author</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">content</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">加载内容</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">access</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">origin</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">访问限制</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">platform</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">android</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">&lt;!-- 针对 Android 平台的配置 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">allow-intent</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">market:*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">platform</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">platform</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ios</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">&lt;!-- 针对 iOS 平台的配置 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">allow-intent</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">itms:*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">allow-intent</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">itms-apps:*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">platform</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">widget</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div>`,106),d=[i];function y(D,F,u,b,C,h){return n(),a("div",null,d)}const v=s(c,[["render",y]]);export{A as __pageData,v as default};
